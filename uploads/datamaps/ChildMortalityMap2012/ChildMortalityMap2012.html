<!DOCTYPE html>
<meta charset="utf-8">
<link href="../../maxstyle_for_d3/max.nv.d3.css" rel="stylesheet" type="text/css">

<style>

#TitleContainer{
    position: absolute;
	width: 100%;
    height: 30px;
    top:0px;
	left: 0; 
	background-color:#FAFAFA;
}

.mainTitleText{
	font-size:12px;
	font-family:"Helvetica Neue","Helvetica";
}





#CreditsContainer{
    position: absolute;
	width: 100%;
    height: 36px;
    bottom:0px;
	left: 0; 
    background-color:#FAFAFA;

}



#map {
    position: absolute;
    top: 0; bottom: 0; right: 0; left: 0; /*fill parent*/
	background-color:#ECF6FC; /*hellblau*/
}


</style>





<body>
  <script src="d3.v3.min.js"></script>
  <script src="topojson.v1.min.js"></script>
  <!-- I recommend you host this file on your own, since this will change without warning -->
  <script src="datamaps.world.min.js"></script>
  <script src="../../maxstyle_for_d3/colorbrewer.js"></script>


	<div id="map"> </div>
	<div>    <svg id="CreditsContainer"></svg>  </div>
	<div>    <svg id="TitleContainer"></svg>  </div>


   <script>
     
     
     
  
     var map = new Datamap({
        scope: 'world',
		projection: 'equirectangular',
        element: document.getElementById('map'),
        // projection: 'mercator',

       geographyConfig: {
        borderWidth: 0.2,
        borderColor: '#4F4F4F',
        highlightBorderColor: 'black',
        highlightBorderWidth: 0.5,

        highlightFillColor: '#FFEC38',
        
        popupTemplate: function(geography, data) {
                    if ( !data ) return;  // makes sure that the tooltip is shown only if there is data 
         			return '<div class="hoverinfo">' + geography.properties.name + '<br>Per 1,000 life births <strong>' +  data.Rate + '</strong> children were dying before the age of 5.';},
            },        
        fills: {
            
              
// Fills & Legendlabels – Reihenfolge ist wichtig - wird in dieser Reihenfolge in der Legende angezeigt (also mit höchstem Wert beginnen)
       defaultFill: 'grey',
		"100 - 199":colorbrewer.RdYlGn[8][2],
		"50 - 99":colorbrewer.RdYlGn[8][3],
		"20 - 49":colorbrewer.RdYlGn[8][4],
		"10 - 19":colorbrewer.RdYlGn[8][5],
		"5 - 9":colorbrewer.RdYlGn[8][6],
		"< 5":colorbrewer.RdYlGn[8][7],

		"no data": 'grey'   
        },
        
      
  data: {  
    "SLE":{Rate:181.6,fillKey:"100 - 199"},
    "AGO":{Rate:163.5,fillKey:"100 - 199"},
    "TCD":{Rate:149.8,fillKey:"100 - 199"},
    "SOM":{Rate:147.4,fillKey:"100 - 199"},
    "COD":{Rate:145.7,fillKey:"100 - 199"},
    "GNB":{Rate:129.1,fillKey:"100 - 199"},
    "CAF":{Rate:128.6,fillKey:"100 - 199"},
    "MLI":{Rate:128,fillKey:"100 - 199"},
    "NGA":{Rate:123.7,fillKey:"100 - 199"},
    "NER":{Rate:113.5,fillKey:"100 - 199"},
    "CIV":{Rate:107.6,fillKey:"100 - 199"},
    "BDI":{Rate:104.3,fillKey:"100 - 199"},
    "SSD":{Rate:104,fillKey:"100 - 199"},
    "BFA":{Rate:102.4,fillKey:"100 - 199"},
    "GIN":{Rate:101.2,fillKey:"100 - 199"},
    "GNQ":{Rate:100.3,fillKey:"100 - 199"},
    "LSO":{Rate:99.6,fillKey:"50 - 99"},
    "AFG":{Rate:98.5,fillKey:"50 - 99"},
    "COG":{Rate:96,fillKey:"50 - 99"},
    "TGO":{Rate:95.5,fillKey:"50 - 99"},
    "CMR":{Rate:94.9,fillKey:"50 - 99"},
    "ZWE":{Rate:89.8,fillKey:"50 - 99"},
    "MOZ":{Rate:89.7,fillKey:"50 - 99"},
    "BEN":{Rate:89.5,fillKey:"50 - 99"},
    "ZMB":{Rate:88.5,fillKey:"50 - 99"},
    "PAK":{Rate:85.9,fillKey:"50 - 99"},
    "MRT":{Rate:84,fillKey:"50 - 99"},
    "DJI":{Rate:80.9,fillKey:"50 - 99"},
    "SWZ":{Rate:79.7,fillKey:"50 - 99"},
    "COM":{Rate:77.6,fillKey:"50 - 99"},
    "HTI":{Rate:75.6,fillKey:"50 - 99"},
    "LBR":{Rate:74.8,fillKey:"50 - 99"},
    "SDN":{Rate:73.1,fillKey:"50 - 99"},
    "GMB":{Rate:72.9,fillKey:"50 - 99"},
    "KEN":{Rate:72.9,fillKey:"50 - 99"},
    "GHA":{Rate:72,fillKey:"50 - 99"},
    "LAO":{Rate:71.8,fillKey:"50 - 99"},
    "MWI":{Rate:71,fillKey:"50 - 99"},
    "UGA":{Rate:68.9,fillKey:"50 - 99"},
    "ETH":{Rate:68.3,fillKey:"50 - 99"},
    "PNG":{Rate:63,fillKey:"50 - 99"},
    "GAB":{Rate:62,fillKey:"50 - 99"},
    "YEM":{Rate:60,fillKey:"50 - 99"},
    "KIR":{Rate:59.9,fillKey:"50 - 99"},
    "SEN":{Rate:59.6,fillKey:"50 - 99"},
    "TJK":{Rate:58.3,fillKey:"50 - 99"},
    "MDG":{Rate:58.2,fillKey:"50 - 99"},
    "TLS":{Rate:56.7,fillKey:"50 - 99"},
    "IND":{Rate:56.3,fillKey:"50 - 99"},
    "RWA":{Rate:55,fillKey:"50 - 99"},
    "TZA":{Rate:54,fillKey:"50 - 99"},
    "BWA":{Rate:53.3,fillKey:"50 - 99"},
    "STP":{Rate:53.2,fillKey:"50 - 99"},
    "TKM":{Rate:52.8,fillKey:"50 - 99"},
    "MMR":{Rate:52.3,fillKey:"50 - 99"},
    "ERI":{Rate:51.8,fillKey:"50 - 99"},
    "BTN":{Rate:44.6,fillKey:"20 - 49"},
    "ZAF":{Rate:44.6,fillKey:"20 - 49"},
    "NPL":{Rate:41.6,fillKey:"20 - 49"},
    "BOL":{Rate:41.4,fillKey:"20 - 49"},
    "BGD":{Rate:40.9,fillKey:"20 - 49"},
    "KHM":{Rate:39.7,fillKey:"20 - 49"},
    "UZB":{Rate:39.6,fillKey:"20 - 49"},
    "NAM":{Rate:38.7,fillKey:"20 - 49"},
    "FSM":{Rate:38.5,fillKey:"20 - 49"},
    "MHL":{Rate:37.9,fillKey:"20 - 49"},
    "NRU":{Rate:37.1,fillKey:"20 - 49"},
    "AZE":{Rate:35.2,fillKey:"20 - 49"},
    "GUY":{Rate:35.2,fillKey:"20 - 49"},
    "IRQ":{Rate:34.4,fillKey:"20 - 49"},
    "GTM":{Rate:32,fillKey:"20 - 49"},
    "MAR":{Rate:31.1,fillKey:"20 - 49"},
    "SLB":{Rate:31.1,fillKey:"20 - 49"},
    "IDN":{Rate:31,fillKey:"20 - 49"},
    "PHL":{Rate:29.8,fillKey:"20 - 49"},
    "TUV":{Rate:29.7,fillKey:"20 - 49"},
    "PRK":{Rate:28.8,fillKey:"20 - 49"},
    "MNG":{Rate:27.5,fillKey:"20 - 49"},
    "DOM":{Rate:27.1,fillKey:"20 - 49"},
    "KGZ":{Rate:26.6,fillKey:"20 - 49"},
    "NIU":{Rate:25.1,fillKey:"20 - 49"},
    "NIC":{Rate:24.4,fillKey:"20 - 49"},
    "VCT":{Rate:23.4,fillKey:"20 - 49"},
    "ECU":{Rate:23.3,fillKey:"20 - 49"},
    "VNM":{Rate:23,fillKey:"20 - 49"},
    "HND":{Rate:22.9,fillKey:"20 - 49"},
    "PSE":{Rate:22.6,fillKey:"20 - 49"},
    "FJI":{Rate:22.4,fillKey:"20 - 49"},
    "CPV":{Rate:22.2,fillKey:"20 - 49"},
    "PRY":{Rate:22,fillKey:"20 - 49"},
    "EGY":{Rate:21,fillKey:"20 - 49"},
    "PLW":{Rate:20.8,fillKey:"20 - 49"},
    "SUR":{Rate:20.8,fillKey:"20 - 49"},
    "TTO":{Rate:20.7,fillKey:"20 - 49"},
    "DZA":{Rate:20,fillKey:"10 - 19"},
    "GEO":{Rate:19.9,fillKey:"10 - 19"},
    "JOR":{Rate:19.1,fillKey:"10 - 19"},
    "KAZ":{Rate:18.7,fillKey:"10 - 19"},
    "PAN":{Rate:18.5,fillKey:"10 - 19"},
    "BRB":{Rate:18.4,fillKey:"10 - 19"},
    "BLZ":{Rate:18.3,fillKey:"10 - 19"},
    "PER":{Rate:18.2,fillKey:"10 - 19"},
    "VUT":{Rate:17.9,fillKey:"10 - 19"},
    "WSM":{Rate:17.8,fillKey:"10 - 19"},
    "COL":{Rate:17.6,fillKey:"10 - 19"},
    "IRN":{Rate:17.6,fillKey:"10 - 19"},
    "MDA":{Rate:17.6,fillKey:"10 - 19"},
    "LCA":{Rate:17.5,fillKey:"10 - 19"},
    "BHS":{Rate:16.9,fillKey:"10 - 19"},
    "JAM":{Rate:16.8,fillKey:"10 - 19"},
    "ALB":{Rate:16.7,fillKey:"10 - 19"},
    "ARM":{Rate:16.4,fillKey:"10 - 19"},
    "MEX":{Rate:16.2,fillKey:"10 - 19"},
    "TUN":{Rate:16.1,fillKey:"10 - 19"},
    "SLV":{Rate:15.9,fillKey:"10 - 19"},
    "LBY":{Rate:15.4,fillKey:"10 - 19"},
    "VEN":{Rate:15.3,fillKey:"10 - 19"},
    "MUS":{Rate:15.1,fillKey:"10 - 19"},
    "SYR":{Rate:15.1,fillKey:"10 - 19"},
    "BRA":{Rate:14.4,fillKey:"10 - 19"},
    "ARG":{Rate:14.2,fillKey:"10 - 19"},
    "TUR":{Rate:14.2,fillKey:"10 - 19"},
    "CHN":{Rate:14,fillKey:"10 - 19"},
    "GRD":{Rate:13.5,fillKey:"10 - 19"},
    "THA":{Rate:13.2,fillKey:"10 - 19"},
    "SYC":{Rate:13.1,fillKey:"10 - 19"},
    "TON":{Rate:12.8,fillKey:"10 - 19"},
    "DMA":{Rate:12.6,fillKey:"10 - 19"},
    "ROU":{Rate:12.2,fillKey:"10 - 19"},
    "BGR":{Rate:12.1,fillKey:"10 - 19"},
    "OMN":{Rate:11.6,fillKey:"10 - 19"},
    "KWT":{Rate:11,fillKey:"10 - 19"},
    "UKR":{Rate:10.7,fillKey:"10 - 19"},
    "COK":{Rate:10.6,fillKey:"10 - 19"},
    "MDV":{Rate:10.5,fillKey:"10 - 19"},
    "RUS":{Rate:10.3,fillKey:"10 - 19"},
    "ATG":{Rate:9.9,fillKey:"5 - 9"},
    "CRI":{Rate:9.9,fillKey:"5 - 9"},
    "BHR":{Rate:9.6,fillKey:"5 - 9"},
    "LKA":{Rate:9.6,fillKey:"5 - 9"},
    "LBN":{Rate:9.3,fillKey:"5 - 9"},
    "KNA":{Rate:9.2,fillKey:"5 - 9"},
    "CHL":{Rate:9.1,fillKey:"5 - 9"},
    "LVA":{Rate:8.7,fillKey:"5 - 9"},
    "SAU":{Rate:8.6,fillKey:"5 - 9"},
    "MYS":{Rate:8.5,fillKey:"5 - 9"},
    "ARE":{Rate:8.4,fillKey:"5 - 9"},
    "BRN":{Rate:8,fillKey:"5 - 9"},
    "SVK":{Rate:7.5,fillKey:"5 - 9"},
    "MKD":{Rate:7.4,fillKey:"5 - 9"},
    "QAT":{Rate:7.4,fillKey:"5 - 9"},
    "URY":{Rate:7.2,fillKey:"5 - 9"},
    "USA":{Rate:7.1,fillKey:"5 - 9"},
    "MLT":{Rate:6.8,fillKey:"5 - 9"},
    "BIH":{Rate:6.7,fillKey:"5 - 9"},
    "SRB":{Rate:6.6,fillKey:"5 - 9"},
    "HUN":{Rate:6.2,fillKey:"5 - 9"},
    "MNE":{Rate:5.9,fillKey:"5 - 9"},
    "NZL":{Rate:5.7,fillKey:"5 - 9"},
    "CUB":{Rate:5.5,fillKey:"5 - 9"},
    "LTU":{Rate:5.4,fillKey:"5 - 9"},
    "CAN":{Rate:5.3,fillKey:"5 - 9"},
    "BLR":{Rate:5.2,fillKey:"5 - 9"},
    "POL":{Rate:5,fillKey:"5 - 9"},
    "AUS":{Rate:4.9,fillKey:"< 5"},
    "GRC":{Rate:4.8,fillKey:"< 5"},
    "GBR":{Rate:4.8,fillKey:"< 5"},
    "HRV":{Rate:4.7,fillKey:"< 5"},
    "ESP":{Rate:4.5,fillKey:"< 5"},
    "CHE":{Rate:4.3,fillKey:"< 5"},
    "BEL":{Rate:4.2,fillKey:"< 5"},
    "ISR":{Rate:4.2,fillKey:"< 5"},
    "FRA":{Rate:4.1,fillKey:"< 5"},
    "DEU":{Rate:4.1,fillKey:"< 5"},
    "NLD":{Rate:4.1,fillKey:"< 5"},
    "AUT":{Rate:4,fillKey:"< 5"},
    "IRL":{Rate:4,fillKey:"< 5"},
    "CZE":{Rate:3.8,fillKey:"< 5"},
    "ITA":{Rate:3.8,fillKey:"< 5"},
    "KOR":{Rate:3.8,fillKey:"< 5"},
    "MCO":{Rate:3.8,fillKey:"< 5"},
    "DNK":{Rate:3.7,fillKey:"< 5"},
    "EST":{Rate:3.6,fillKey:"< 5"},
    "PRT":{Rate:3.6,fillKey:"< 5"},
    "SMR":{Rate:3.3,fillKey:"< 5"},
    "AND":{Rate:3.2,fillKey:"< 5"},
    "CYP":{Rate:3.2,fillKey:"< 5"},
    "SVN":{Rate:3.1,fillKey:"< 5"},
    "JPN":{Rate:3,fillKey:"< 5"},
    "FIN":{Rate:2.9,fillKey:"< 5"},
    "SGP":{Rate:2.9,fillKey:"< 5"},
    "SWE":{Rate:2.9,fillKey:"< 5"},
    "NOR":{Rate:2.8,fillKey:"< 5"},
    "ISL":{Rate:2.3,fillKey:"< 5"},
    "LUX":{Rate:2.2,fillKey:"< 5"}
  
  
}
});
     
     
     


    
   // Max Plugin
      //plugin added by me to have the legend vertically
  function addLegendmaxstyle(layer, data, options) {
    data = data || {};
    if ( !this.options.fills ) {
      return;
    }

    var html = '<dl>';
    var label = '';
    if ( data.legendTitle ) {
      html = '<h4>' + data.legendTitle + '</h4>' + html;
    }
    
    for ( var fillKey in this.options.fills ) {

      if ( fillKey === 'defaultFill') {
        if (! data.defaultFillName ) {
          continue;
        }
        label = data.defaultFillName;
      } else {
        if (data.labels && data.labels[fillKey]) {
          label = data.labels[fillKey];
        } else {
        
        // Changed by Max //
	label= '' + fillKey;
    html += '<dd style="background-color:' +  this.options.fills[fillKey] + '">&nbsp;</dd>';
	html += '<dt>' + label + '</dt>'+ '<br>';

        }
      }
    }
    html += '</dl>';

    var hoverover = d3.select( this.options.element ).append('div')
      .attr('class', 'datamaps-legend')
      .html(html);
  }
  
  
//Legende anzeigen  
   map.addPlugin("mylegend", addLegendmaxstyle);
   map.mylegend({legendTitle:"Child mortality (per 1,000 live births)"})

    
    
    







/*  TITLE                      */
/* --------------------------- */

var TitleCanvas = d3.select("#TitleContainer")


TitleCanvas
	.append("text")
	.text("Children dying before the age of 5 (per 1,000 live births) – in 2012")
	.attr("x",75)
	.attr("y",18)
	.attr('class','mainTitleText');
	
	
	
TitleCanvas.append("svg:image")
   		.attr('x',3)
   		.attr('y',1)
   		.attr('width', 65)
   		.attr('height', 30)
   		.attr("xlink:href","../../maxstyle_for_d3/EPLogo.png");






 
/*--------------------------------------------------*/
/*    				  Credits    					*/
/*--------------------------------------------------*/
   		
var creditsCanvas = d3.select("#CreditsContainer")
		var xorigin=8;
		var yorigin=1;


/*1. Zeile*/	
creditsCanvas
	.append("text")
	.text("The author Max Roser licensed this visualisation under a")
	.attr("x",xorigin+0)
	.attr("y",yorigin+10)
	.attr("id",'erstesTextstuck').attr('class','creditsText');
var erstesTextstuckLange = document.getElementById('erstesTextstuck').getComputedTextLength();

creditsCanvas.append("svg:a")
		  .attr("xlink:href", "http://creativecommons.org/licenses/by-sa/4.0/deed.en_US")
		  .attr("target","_blank")
		  .append("svg:text")
		  .attr("x", xorigin+erstesTextstuckLange+3)
		  .attr("y", yorigin+10)
		  .attr('class','creditsLink').attr("id",'zweitesTextstuck')
	      .text("CC BY-SA license");
var zweitesTextstuckLange = document.getElementById('zweitesTextstuck').getComputedTextLength();


creditsCanvas
	.append("text")
	.text(". You are welcome to share but please refer to its source where you")
	.attr("x",xorigin+erstesTextstuckLange+3+zweitesTextstuckLange+1)
	.attr("y",yorigin+10)
	.attr("id",'drittesTextstuck').attr('class','creditsText');	
var drittesTextstuckLange = document.getElementById('drittesTextstuck').getComputedTextLength();

	
/*1. oder 2. Zeile*/	

var TextViertesTextstuck = creditsCanvas
	.append("text")
	.text("find more information:")
	.attr("id",'viertesTextstuck')
	.attr('class','creditsText');
	var viertesTextstuckLange = document.getElementById('viertesTextstuck').getComputedTextLength();
	
var TextFunftesTextstuck = creditsCanvas.append("svg:a")
		  .attr("xlink:href", "http://www.ourworldindata.org/data/population-growth-vital-statistics/child-mortality")
		  .attr("target","_blank")
		  .append("svg:text")
		  .attr('class','creditsLink')
	      .text("www.ourworldindata.org/data/population-growth-vital-statistics/child-mortality")
		  .attr("id",'funftesTextstuck');
var funftesTextstuckLange = document.getElementById('funftesTextstuck').getComputedTextLength();

var creditsCanvasWidth = parseInt(creditsCanvas.style('width'));
var LongTextWidth = parseInt( xorigin + erstesTextstuckLange + 3 + zweitesTextstuckLange + 1 + drittesTextstuckLange + 3 + viertesTextstuckLange + 3 + funftesTextstuckLange );

if (creditsCanvasWidth > LongTextWidth ) {
TextViertesTextstuck
	.attr("x",xorigin+erstesTextstuckLange+3+zweitesTextstuckLange+1+drittesTextstuckLange+3)
	.attr("y",yorigin+10);
	}
 else
  {
TextViertesTextstuck
	.attr("x",xorigin+0)
	.attr("y",yorigin+21);
	  }

	
if (creditsCanvasWidth > LongTextWidth ) {
	TextFunftesTextstuck
		  .attr("x",xorigin+erstesTextstuckLange+3+zweitesTextstuckLange+1+drittesTextstuckLange+3+viertesTextstuckLange+3)
		  .attr("y", yorigin+10);
	}
 else
  {
TextFunftesTextstuck
		  .attr("x", xorigin+102)
		  .attr("y", yorigin+21);
	  }



/*3. Zeile*/	
creditsCanvas
  	.append("text")
  	.text("Data source: UNICEF's www.childmortality.org")
  	.attr("x",xorigin+0)
  	.attr("y",yorigin+32)
  	.attr('class','creditsText');
	
/* ------- end credits ------ */

     
     </script>
</body>