<!DOCTYPE html>
<meta charset="utf-8">
<link href="../../maxstyle_for_d3/max.nv.d3.css" rel="stylesheet" type="text/css">

<style>


.download { 
  background: #333; 
  color: #FFF; 
  font-weight: 900; 
  border: 2px solid #B10000; 
  padding: 4px; 
  margin:4px;
}

#TitleContainer{
    position: absolute;
	width: 100%;
    height: 26px;
    top:0px;
	left: 0; 
	background-color:#FAFAFA;
}

.mainTitleText{
	font-size:12px;
	font-family:"Helvetica Neue","Helvetica";
}

#CreditsContainer{
    position: absolute;
	width: 100%;
    height: 36px;
    bottom:0px;
	left: 0; 
    background-color:#FAFAFA;

}



#map {
    position: absolute;
    top: 0; bottom: 0; right: 0; left: 0; /*fill parent*/
	background-color:#ECF6FC; /*hellblau*/
}


</style>





<body>
  <script src="d3.v3.min.js"></script>
  <script src="topojson.v1.min.js"></script>
  <!-- I recommend you host this file on your own, since this will change without warning -->
  <script src="datamaps.world.min.js"></script>
  <script src="../../maxstyle_for_d3/colorbrewer.js"></script>

   
<div id="all">
	<div id="map"> </div>
	<div>    <svg id="CreditsContainer"></svg>  </div>
	<div>    <svg id="TitleContainer"></svg>  </div>
</div>

   <script>
     
     
     var colorschemeOfThisMap = colorbrewer.RdYlBu;
  
     var map = new Datamap({
        scope: 'world',
		projection: 'equirectangular',
        element: document.getElementById('map'),
        // projection: 'mercator',

       geographyConfig: {
        borderWidth: 0.2,
        borderColor: '#4F4F4F',
        highlightBorderColor: 'black',
        highlightBorderWidth: 0.5,

        highlightFillColor: '#FFEC38',
        
        popupTemplate: function(geography, data) {
                    if ( !data ) return;  // makes sure that the tooltip is shown only if there is data 
         			return '<div class="hoverinfo">' + geography.properties.name + '<br><strong>' +  data.tfr + '</strong> children per woman';},
            },        
        fills: {
            
              
// Fills & Legendlabels – Reihenfolge ist wichtig - wird in dieser Reihenfolge in der Legende angezeigt (also mit höchstem Wert beginnen)
       defaultFill: 'grey',
		"8 - 8.99": colorschemeOfThisMap[8][0],
		"7 - 7.99": colorschemeOfThisMap[8][1],
		"6 - 6.99": colorschemeOfThisMap[8][2],
		"5 - 5.99":colorschemeOfThisMap[8][3],
		"4 - 4.99":colorschemeOfThisMap[8][4],
		"3 - 3.99":colorschemeOfThisMap[8][5],
		"2 - 2.99":colorschemeOfThisMap[8][6],
		"1 - 1.99":colorschemeOfThisMap[8][7],
		"no data": 'grey'   
        },
        
      
  data: {
   
 "RWA":{tfr:8.2,fillKey:"8 - 8.99"},
 "KEN":{tfr:8.065,fillKey:"8 - 8.99"},
 "ZWE":{tfr:7.3,fillKey:"7 - 7.99"},
 "ZMB":{tfr:7.15,fillKey:"7 - 7.99"},
 "YEM":{tfr:7.335,fillKey:"7 - 7.99"},
 "WSM":{tfr:7.629,fillKey:"7 - 7.99"},
 "VUT":{tfr:7,fillKey:"7 - 7.99"},
 "VCT":{tfr:7.02,fillKey:"7 - 7.99"},
 "UGA":{tfr:7.05,fillKey:"7 - 7.99"},
 "TUN":{tfr:7.14,fillKey:"7 - 7.99"},
 "TON":{tfr:7.3,fillKey:"7 - 7.99"},
 "SYR":{tfr:7.539,fillKey:"7 - 7.99"},
 "SOM":{tfr:7.25,fillKey:"7 - 7.99"},
 "SEN":{tfr:7.055,fillKey:"7 - 7.99"},
 "SAU":{tfr:7.257,fillKey:"7 - 7.99"},
 "PSE":{tfr:7.995,fillKey:"7 - 7.99"},
 "OMN":{tfr:7.252,fillKey:"7 - 7.99"},
 "NIC":{tfr:7.1,fillKey:"7 - 7.99"},
 "NER":{tfr:7.134,fillKey:"7 - 7.99"},
 "MYT":{tfr:7.91,fillKey:"7 - 7.99"},
 "MWI":{tfr:7.004,fillKey:"7 - 7.99"},
 "MNG":{tfr:7.5,fillKey:"7 - 7.99"},
 "MDV":{tfr:7.12,fillKey:"7 - 7.99"},
 "MDG":{tfr:7.3,fillKey:"7 - 7.99"},
 "MAR":{tfr:7.15,fillKey:"7 - 7.99"},
 "LBY":{tfr:7.624,fillKey:"7 - 7.99"},
 "KWT":{tfr:7.308,fillKey:"7 - 7.99"},
 "KIR":{tfr:7,fillKey:"7 - 7.99"},
 "JOR":{tfr:7.995,fillKey:"7 - 7.99"},
 "HND":{tfr:7.418,fillKey:"7 - 7.99"},
 "DZA":{tfr:7.648,fillKey:"7 - 7.99"},
 "DOM":{tfr:7.351,fillKey:"7 - 7.99"},
 "CRI":{tfr:7.225,fillKey:"7 - 7.99"},
 "CIV":{tfr:7.532,fillKey:"7 - 7.99"},
 "BHR":{tfr:7.175,fillKey:"7 - 7.99"},
 "BDI":{tfr:7.071,fillKey:"7 - 7.99"},
 "AGO":{tfr:7.4,fillKey:"7 - 7.99"},
 "AFG":{tfr:7.671,fillKey:"7 - 7.99"},
 "ZAF":{tfr:6.1,fillKey:"6 - 6.99"},
 "VNM":{tfr:6.418,fillKey:"6 - 6.99"},
 "VEN":{tfr:6.657,fillKey:"6 - 6.99"},
 "UZB":{tfr:6.8,fillKey:"6 - 6.99"},
 "TZA":{tfr:6.8,fillKey:"6 - 6.99"},
 "TUR":{tfr:6.141,fillKey:"6 - 6.99"},
 "TLS":{tfr:6.371,fillKey:"6 - 6.99"},
 "TKM":{tfr:6.752,fillKey:"6 - 6.99"},
 "TJK":{tfr:6.302,fillKey:"6 - 6.99"},
 "THA":{tfr:6.13,fillKey:"6 - 6.99"},
 "TGO":{tfr:6.652,fillKey:"6 - 6.99"},
 "TCD":{tfr:6.3,fillKey:"6 - 6.99"},
 "SWZ":{tfr:6.75,fillKey:"6 - 6.99"},
 "SUR":{tfr:6.56,fillKey:"6 - 6.99"},
 "STP":{tfr:6.3,fillKey:"6 - 6.99"},
 "SSD":{tfr:6.75,fillKey:"6 - 6.99"},
 "SLV":{tfr:6.759,fillKey:"6 - 6.99"},
 "SLE":{tfr:6.188,fillKey:"6 - 6.99"},
 "SLB":{tfr:6.4,fillKey:"6 - 6.99"},
 "REU":{tfr:6.563,fillKey:"6 - 6.99"},
 "QAT":{tfr:6.97,fillKey:"6 - 6.99"},
 "PRY":{tfr:6.45,fillKey:"6 - 6.99"},
 "PNG":{tfr:6.278,fillKey:"6 - 6.99"},
 "PHL":{tfr:6.981,fillKey:"6 - 6.99"},
 "PER":{tfr:6.853,fillKey:"6 - 6.99"},
 "PAK":{tfr:6.6,fillKey:"6 - 6.99"},
 "NGA":{tfr:6.354,fillKey:"6 - 6.99"},
 "NAM":{tfr:6.2,fillKey:"6 - 6.99"},
 "MYS":{tfr:6.03,fillKey:"6 - 6.99"},
 "MUS":{tfr:6.195,fillKey:"6 - 6.99"},
 "MRT":{tfr:6.786,fillKey:"6 - 6.99"},
 "MOZ":{tfr:6.6,fillKey:"6 - 6.99"},
 "MMR":{tfr:6.1,fillKey:"6 - 6.99"},
 "MLI":{tfr:6.753,fillKey:"6 - 6.99"},
 "MEX":{tfr:6.75,fillKey:"6 - 6.99"},
 "LCA":{tfr:6.794,fillKey:"6 - 6.99"},
 "LBR":{tfr:6.47,fillKey:"6 - 6.99"},
 "KHM":{tfr:6.947,fillKey:"6 - 6.99"},
 "IRQ":{tfr:6.598,fillKey:"6 - 6.99"},
 "IRN":{tfr:6.909,fillKey:"6 - 6.99"},
 "HTI":{tfr:6.3,fillKey:"6 - 6.99"},
 "GUM":{tfr:6.03,fillKey:"6 - 6.99"},
 "GTM":{tfr:6.5,fillKey:"6 - 6.99"},
 "GRD":{tfr:6.4,fillKey:"6 - 6.99"},
 "GIN":{tfr:6.131,fillKey:"6 - 6.99"},
 "GHA":{tfr:6.844,fillKey:"6 - 6.99"},
 "FSM":{tfr:6.9,fillKey:"6 - 6.99"},
 "ETH":{tfr:6.897,fillKey:"6 - 6.99"},
 "ESH":{tfr:6.534,fillKey:"6 - 6.99"},
 "ERI":{tfr:6.815,fillKey:"6 - 6.99"},
 "EGY":{tfr:6.55,fillKey:"6 - 6.99"},
 "ECU":{tfr:6.628,fillKey:"6 - 6.99"},
 "DJI":{tfr:6.547,fillKey:"6 - 6.99"},
 "CPV":{tfr:6.973,fillKey:"6 - 6.99"},
 "COM":{tfr:6.909,fillKey:"6 - 6.99"},
 "COL":{tfr:6.76,fillKey:"6 - 6.99"},
 "COD":{tfr:6.04,fillKey:"6 - 6.99"},
 "CHN":{tfr:6.112,fillKey:"6 - 6.99"},
 "BWA":{tfr:6.65,fillKey:"6 - 6.99"},
 "BTN":{tfr:6.67,fillKey:"6 - 6.99"},
 "BRN":{tfr:6.555,fillKey:"6 - 6.99"},
 "BRA":{tfr:6.151,fillKey:"6 - 6.99"},
 "BOL":{tfr:6.63,fillKey:"6 - 6.99"},
 "BLZ":{tfr:6.45,fillKey:"6 - 6.99"},
 "BGD":{tfr:6.804,fillKey:"6 - 6.99"},
 "BFA":{tfr:6.35,fillKey:"6 - 6.99"},
 "BEN":{tfr:6.423,fillKey:"6 - 6.99"},
 "ARE":{tfr:6.868,fillKey:"6 - 6.99"},
 "VIR":{tfr:5.672,fillKey:"5 - 5.99"},
 "TWN":{tfr:5.287,fillKey:"5 - 5.99"},
 "TTO":{tfr:5.04,fillKey:"5 - 5.99"},
 "SYC":{tfr:5.59,fillKey:"5 - 5.99"},
 "SGP":{tfr:5.12,fillKey:"5 - 5.99"},
 "PYF":{tfr:5.438,fillKey:"5 - 5.99"},
 "PAN":{tfr:5.79,fillKey:"5 - 5.99"},
 "NPL":{tfr:5.993,fillKey:"5 - 5.99"},
 "NCL":{tfr:5.223,fillKey:"5 - 5.99"},
 "MTQ":{tfr:5.45,fillKey:"5 - 5.99"},
 "LSO":{tfr:5.811,fillKey:"5 - 5.99"},
 "LKA":{tfr:5.2,fillKey:"5 - 5.99"},
 "LBN":{tfr:5.689,fillKey:"5 - 5.99"},
 "LAO":{tfr:5.967,fillKey:"5 - 5.99"},
 "KOR":{tfr:5.63,fillKey:"5 - 5.99"},
 "KGZ":{tfr:5.39,fillKey:"5 - 5.99"},
 "JAM":{tfr:5.64,fillKey:"5 - 5.99"},
 "IND":{tfr:5.822,fillKey:"5 - 5.99"},
 "IDN":{tfr:5.62,fillKey:"5 - 5.99"},
 "HKG":{tfr:5.31,fillKey:"5 - 5.99"},
 "GUY":{tfr:5.396,fillKey:"5 - 5.99"},
 "GUF":{tfr:5.02,fillKey:"5 - 5.99"},
 "GNQ":{tfr:5.53,fillKey:"5 - 5.99"},
 "GNB":{tfr:5.875,fillKey:"5 - 5.99"},
 "GMB":{tfr:5.697,fillKey:"5 - 5.99"},
 "GLP":{tfr:5.61,fillKey:"5 - 5.99"},
 "FJI":{tfr:5.953,fillKey:"5 - 5.99"},
 "COG":{tfr:5.989,fillKey:"5 - 5.99"},
 "CMR":{tfr:5.805,fillKey:"5 - 5.99"},
 "CHL":{tfr:5.439,fillKey:"5 - 5.99"},
 "CAF":{tfr:5.9,fillKey:"5 - 5.99"},
 "AZE":{tfr:5.637,fillKey:"5 - 5.99"},
 "ALB":{tfr:5.863,fillKey:"5 - 5.99"},
 "PRI":{tfr:4.37,fillKey:"4 - 4.99"},
 "NZL":{tfr:4.022,fillKey:"4 - 4.99"},
 "MAC":{tfr:4.408,fillKey:"4 - 4.99"},
 "KAZ":{tfr:4.431,fillKey:"4 - 4.99"},
 "IRL":{tfr:4.065,fillKey:"4 - 4.99"},
 "GAB":{tfr:4.587,fillKey:"4 - 4.99"},
 "CUB":{tfr:4.681,fillKey:"4 - 4.99"},
 "BRB":{tfr:4.273,fillKey:"4 - 4.99"},
 "BHS":{tfr:4.5,fillKey:"4 - 4.99"},
 "ATG":{tfr:4.3,fillKey:"4 - 4.99"},
 "ARM":{tfr:4.453,fillKey:"4 - 4.99"},
 "ABW":{tfr:4.399,fillKey:"4 - 4.99"},
 "USA":{tfr:3.396,fillKey:"3 - 3.99"},
 "PRT":{tfr:3.187,fillKey:"3 - 3.99"},
 "PRK":{tfr:3.85,fillKey:"3 - 3.99"},
 "NLD":{tfr:3.166,fillKey:"3 - 3.99"},
 "MNE":{tfr:3.257,fillKey:"3 - 3.99"},
 "MLT":{tfr:3.149,fillKey:"3 - 3.99"},
 "MKD":{tfr:3.585,fillKey:"3 - 3.99"},
 "MDA":{tfr:3.15,fillKey:"3 - 3.99"},
 "ISR":{tfr:3.846,fillKey:"3 - 3.99"},
 "ISL":{tfr:3.938,fillKey:"3 - 3.99"},
 "CYP":{tfr:3.436,fillKey:"3 - 3.99"},
 "CAN":{tfr:3.675,fillKey:"3 - 3.99"},
 "BIH":{tfr:3.81,fillKey:"3 - 3.99"},
 "AUS":{tfr:3.274,fillKey:"3 - 3.99"},
 "ARG":{tfr:3.09,fillKey:"3 - 3.99"},
 "URY":{tfr:2.901,fillKey:"2 - 2.99"},
 "UKR":{tfr:2.135,fillKey:"2 - 2.99"},
 "SWE":{tfr:2.31,fillKey:"2 - 2.99"},
 "SVN":{tfr:2.339,fillKey:"2 - 2.99"},
 "SVK":{tfr:2.911,fillKey:"2 - 2.99"},
 "POL":{tfr:2.65,fillKey:"2 - 2.99"},
 "NOR":{tfr:2.898,fillKey:"2 - 2.99"},
 "LUX":{tfr:2.395,fillKey:"2 - 2.99"},
 "LTU":{tfr:2.427,fillKey:"2 - 2.99"},
 "ITA":{tfr:2.466,fillKey:"2 - 2.99"},
 "HRV":{tfr:2.27,fillKey:"2 - 2.99"},
 "GRC":{tfr:2.2,fillKey:"2 - 2.99"},
 "GEO":{tfr:2.979,fillKey:"2 - 2.99"},
 "GBR":{tfr:2.81,fillKey:"2 - 2.99"},
 "FRA":{tfr:2.832,fillKey:"2 - 2.99"},
 "FIN":{tfr:2.66,fillKey:"2 - 2.99"},
 "ESP":{tfr:2.81,fillKey:"2 - 2.99"},
 "DNK":{tfr:2.582,fillKey:"2 - 2.99"},
 "DEU":{tfr:2.474,fillKey:"2 - 2.99"},
 "CZE":{tfr:2.239,fillKey:"2 - 2.99"},
 "CHE":{tfr:2.597,fillKey:"2 - 2.99"},
 "BLR":{tfr:2.69,fillKey:"2 - 2.99"},
 "BGR":{tfr:2.217,fillKey:"2 - 2.99"},
 "BEL":{tfr:2.647,fillKey:"2 - 2.99"},
 "AUT":{tfr:2.778,fillKey:"2 - 2.99"},
 "ROU":{tfr:1.951,fillKey:"1 - 1.99"},
 "LVA":{tfr:1.85,fillKey:"1 - 1.99"},
 "JPN":{tfr:1.986,fillKey:"1 - 1.99"},
 "HUN":{tfr:1.862,fillKey:"1 - 1.99"},
 "EST":{tfr:1.94,fillKey:"1 - 1.99"},
 "RUS":{tfr:2.55,fillKey:"2 - 2.99"},
 "SDN":{tfr:6.65,fillKey:"6 - 6.99"}
  
}
});
     
     
     


    
   // Max Plugin
      //plugin added by me to have the legend vertically
  function addLegendmaxstyle(layer, data, options) {
    data = data || {};
    if ( !this.options.fills ) {
      return;
    }

    var html = '<dl>';
    var label = '';
    if ( data.legendTitle ) {
      html = '<h4>' + data.legendTitle + '</h4>' + html;
    }
    
    for ( var fillKey in this.options.fills ) {

      if ( fillKey === 'defaultFill') {
        if (! data.defaultFillName ) {
          continue;
        }
        label = data.defaultFillName;
      } else {
        if (data.labels && data.labels[fillKey]) {
          label = data.labels[fillKey];
        } else {
        
        // Changed by Max //
	label= '' + fillKey;
    html += '<dd style="background-color:' +  this.options.fills[fillKey] + '">&nbsp;</dd>';
	html += '<dt>' + label + '</dt>'+ '<br>';

        }
      }
    }
    html += '</dl>';

    var hoverover = d3.select( this.options.element ).append('div')
      .attr('class', 'datamaps-legend')
      .html(html);
  }
  
  
//Legende anzeigen  
   map.addPlugin("mylegend", addLegendmaxstyle);
   map.mylegend({legendTitle:"Total Fertility Rate (Children per Woman)"})

    
    
    







/*  TITLE                      */
/* --------------------------- */

var TitleCanvas = d3.select("#TitleContainer")


TitleCanvas
	.append("text")
	.text("Total Fertility Rate (Children per Woman) in 1960-65")
	.attr("x",35)
	.attr("y",18)
	.attr('class','mainTitleText');
	
	
	
TitleCanvas.append("svg:image")
   		.attr('x',3)
   		.attr('y',1)
   		.attr('width', 32)
   		.attr('height', 22)
   		.attr("xlink:href","../../maxstyle_for_d3/EPLogo.png");






 
/*--------------------------------------------------*/
/*    				  Credits    					*/
/*--------------------------------------------------*/
   		
var creditsCanvas = d3.select("#CreditsContainer")
		var xorigin=8;
		var yorigin=1;


/*1. Zeile*/	
creditsCanvas
	.append("text")
	.text("The author Max Roser licensed this visualisation under a")
	.attr("x",xorigin+0)
	.attr("y",yorigin+10)
	.attr("id",'erstesTextstuck').attr('class','creditsText');
var erstesTextstuckLange = document.getElementById('erstesTextstuck').getComputedTextLength();

creditsCanvas.append("svg:a")
		  .attr("xlink:href", "http://creativecommons.org/licenses/by-sa/4.0/deed.en_US")
		  .attr("target","_blank")
		  .append("svg:text")
		  .attr("x", xorigin+erstesTextstuckLange+3)
		  .attr("y", yorigin+10)
		  .attr('class','creditsLink').attr("id",'zweitesTextstuck')
	      .text("CC BY-SA license");
var zweitesTextstuckLange = document.getElementById('zweitesTextstuck').getComputedTextLength();


creditsCanvas
	.append("text")
	.text(". You are welcome to share but please refer to its source where you")
	.attr("x",xorigin+erstesTextstuckLange+3+zweitesTextstuckLange+1)
	.attr("y",yorigin+10)
	.attr("id",'drittesTextstuck').attr('class','creditsText');	
var drittesTextstuckLange = document.getElementById('drittesTextstuck').getComputedTextLength();

	
/*1. oder 2. Zeile*/	

var TextViertesTextstuck = creditsCanvas
	.append("text")
	.text("find more information:")
	.attr("id",'viertesTextstuck')
	.attr('class','creditsText');
	var viertesTextstuckLange = document.getElementById('viertesTextstuck').getComputedTextLength();
	
var TextFunftesTextstuck = creditsCanvas.append("svg:a")
		  .attr("xlink:href", "http://www.OurWorldinData.org/data/population-growth-vital-statistics/fertility-rates")
		  .attr("target","_blank")
		  .append("svg:text")
		  .attr('class','creditsLink')
	      .text("www.OurWorldinData.org/data/population-growth-vital-statistics/fertility-rates")
		  .attr("id",'funftesTextstuck');
var funftesTextstuckLange = document.getElementById('funftesTextstuck').getComputedTextLength();

var creditsCanvasWidth = parseInt(creditsCanvas.style('width'));
var LongTextWidth = parseInt( xorigin + erstesTextstuckLange + 3 + zweitesTextstuckLange + 1 + drittesTextstuckLange + 3 + viertesTextstuckLange + 3 + funftesTextstuckLange );

if (creditsCanvasWidth > LongTextWidth ) {
TextViertesTextstuck
	.attr("x",xorigin+erstesTextstuckLange+3+zweitesTextstuckLange+1+drittesTextstuckLange+3)
	.attr("y",yorigin+10);
	}
 else
  {
TextViertesTextstuck
	.attr("x",xorigin+0)
	.attr("y",yorigin+21);
	  }

	
if (creditsCanvasWidth > LongTextWidth ) {
	TextFunftesTextstuck
		  .attr("x",xorigin+erstesTextstuckLange+3+zweitesTextstuckLange+1+drittesTextstuckLange+3+viertesTextstuckLange+3)
		  .attr("y", yorigin+10);
	}
 else
  {
TextFunftesTextstuck
		  .attr("x", xorigin+102)
		  .attr("y", yorigin+21);
	  }



/*3. Zeile*/	
creditsCanvas
  	.append("text")
  	.text("Data source: United Nation's Population Division (2012 Revision)")
  	.attr("x",xorigin+0)
  	.attr("y",yorigin+32)
  	.attr('class','creditsText');
	
	
	
	
/* ------- end credits ------ */
		  

     
     </script>
</body>